<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lùmina 7 - Ritual de Alineación Interior</title>
    <meta name="description" content="Revela la geometría interna de tu estado en solo 7 minutos. Descubre tu símbolo único y activa el movimiento interno." />
    <meta name="author" content="Lùmina" />

    <!-- Critical Preconnects (max 3) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Preload critical font -->
    <link rel="preload" href="https://fonts.gstatic.com/s/playfairdisplay/v37/nuFiD-vYSZviVYUb_rj3ij__anPXDTnCjmHKM4nYO7KN_pWvT5Fg.woff2" as="font" type="font/woff2" crossorigin>

    <!-- Google Fonts with swap (non-blocking) -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet"></noscript>

    <!-- Inline Critical CSS (minified) -->
    <style>
      *,::after,::before{box-sizing:border-box;border:0 solid}
      html{line-height:1.5;-webkit-text-size-adjust:100%;font-family:ui-sans-serif,system-ui,sans-serif}
      body{margin:0;line-height:inherit;font-family:'Inter',ui-sans-serif,system-ui,sans-serif;background:hsl(280 60% 98%);color:hsl(280 40% 15%)}
      h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit;font-family:'Playfair Display',ui-serif,serif}
      img,svg,video{display:block;max-width:100%;height:auto}
      button{font-family:inherit;font-size:100%;line-height:inherit;color:inherit;margin:0;padding:0;background-color:transparent;cursor:pointer}
      #root{min-height:100vh;display:flex;flex-direction:column}
      .min-h-screen{min-height:100vh}
      .flex{display:flex}
      .items-center{align-items:center}
      .justify-center{justify-content:center}
      .text-center{text-align:center}
      .relative{position:relative}
      .overflow-hidden{overflow:hidden}
      .bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}
      .from-background{--tw-gradient-from:hsl(280 60% 98%);--tw-gradient-stops:var(--tw-gradient-from),var(--tw-gradient-to)}
      .to-background{--tw-gradient-to:hsl(280 60% 98%)}
      .gradient-mystical{background:linear-gradient(135deg,hsl(275 60% 55%),hsl(295 70% 65%))}
      .mystical-glow{box-shadow:0 0 30px hsl(275 80% 70% / 0.3)}
      .mystical-glow-intense{box-shadow:0 0 50px hsl(295 70% 65% / 0.5)}
      .text-gradient{background-image:linear-gradient(to right,hsl(275 60% 45%),hsl(295 70% 65%),hsl(275 60% 45%));-webkit-background-clip:text;background-clip:text;color:transparent}
      .font-serif{font-family:'Playfair Display',ui-serif,serif}
      @keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
      .fade-in-up{animation:fadeInUp .6s ease-out}
    </style>

    <!-- Open Graph -->
    <meta property="og:title" content="Lùmina 7 - Ritual de Alineación Interior" />
    <meta property="og:description" content="Revela la geometría interna de tu estado en solo 7 minutos." />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="es_ES" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Lùmina 7 - Ritual de Alineación Interior" />
    <meta name="twitter:description" content="Revela la geometría interna de tu estado en solo 7 minutos." />

    <!-- Canonical -->
    <link rel="canonical" href="https://rituallumina7.com" />

    <!-- --- PIXEL: load EARLY but non-blocking for render-critical resources --- -->
    <!-- Set pixel id immediately, then inject pixel script synchronously before app module. -->
    <script>
      // Expose pixel id as early as possible so any subsequent tracker can read it.
      window.pixelId = '6934bda660f2cccac58fb53b';
      // Immediate injector: insert script without requestIdleCallback to avoid missing initial events.
      (function(){
        try{
          var s = document.createElement('script');
          s.src = 'https://cdn.utmify.com.br/scripts/pixel/pixel.js';
          // Keep execution predictable: do NOT set async (default false) so script runs as soon as it's fetched
          // but adding charset & crossorigin if required by provider
          s.defer = false;
          s.crossOrigin = 'anonymous';
          var parent = document.head || document.getElementsByTagName('head')[0] || document.documentElement;
          parent.appendChild(s);
        }catch(e){console.error('pixel injector', e)}
      })();
    </script>

  </head>

  <body>
    <!-- Critical content for LCP -->
    <div id="root">
      <div class="min-h-screen bg-gradient-to-b from-background to-background relative overflow-hidden flex items-center justify-center">
        <div class="text-center fade-in-up">
          <h1 class="text-4xl font-serif text-gradient" style="font-size:2.25rem;line-height:2.5rem">Revela La Geometría Interna De Tu Estado En Solo 7 Minutos.</h1>
        </div>
      </div>
    </div>

    <!-- App entry (module scripts are deferred by spec) -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- Third-party non-critical scripts: load async at end of body, no idle callback gating -->
    <script>
      (function(){
        // UTMify loader: non-blocking, but starts as soon as possible after main parsing
        var ut = document.createElement('script');
        ut.src = 'https://cdn.utmify.com.br/scripts/utms/latest.js';
        ut.async = true;
        ut.setAttribute('data-utmify-prevent-xcod-sck','');
        ut.setAttribute('data-utmify-prevent-subids','');
        ut.setAttribute('data-utmify-ignore-iframe','');
        document.body.appendChild(ut);

        var cps = document.createElement('script');
        cps.src = 'https://assets.mycartpanda.com/cartx-ecomm-ui-assets/js/cpsales.js';
        cps.async = true;
        document.body.appendChild(cps);

        // Pixel helper for backwards compatibility: ensure window.pixelReady resolves when pixel global exists
        window.pixelReady = new Promise(function(resolve){
          if(window.__utmify && typeof window.__utmify.init === 'function') return resolve(window.__utmify);
          var t = setInterval(function(){
            if(window.__utmify && typeof window.__utmify.init === 'function'){
              clearInterval(t);
              resolve(window.__utmify);
            }
          }, 50);
          // safety timeout
          setTimeout(function(){ clearInterval(t); resolve(null); }, 5000);
        });
      })();
    </script>

    <!-- Performance observers: collect LCP / CLS and log (console + beacon) -->
    <script>
      (function(){
        // Send results to console and, if present, to analytics endpoint using sendBeacon.
        var perfData = { lcp: null, cls: 0 };

        // LCP
        try{
          var poLCP = new PerformanceObserver(function(list){
            var entries = list.getEntries();
            var last = entries[entries.length - 1];
            if(last) perfData.lcp = last.renderTime || last.startTime;
          });
          poLCP.observe({type: 'largest-contentful-paint', buffered: true});
        }catch(e){}

        // CLS
        try{
          var clsValue = 0;
          var poCLS = new PerformanceObserver(function(list){
            for(var entry of list.getEntries()){
              if(!entry) continue;
              if(entry.hadRecentInput) continue;
              clsValue += entry.value;
            }
            perfData.cls = clsValue;
          });
          poCLS.observe({type: 'layout-shift', buffered: true});
        }catch(e){}

        // Flush on pagehide (best-effort) or after 10s
        function flush(){
          try{
            console.info('Performance metrics', perfData);
            var payload = JSON.stringify(Object.assign({url: location.href, ts: Date.now()}, perfData));
            if(navigator.sendBeacon){
              navigator.sendBeacon('/__client-metrics', payload);
            }else{
              fetch('/__client-metrics', {method:'POST',body:payload,keepalive:true,headers:{'Content-Type':'application/json'}}).catch(()=>{});
            }
          }catch(e){}
        }
        addEventListener('pagehide', flush, {passive:true});
        setTimeout(flush, 10000);
      })();
    </script>

  </body>
</html>
